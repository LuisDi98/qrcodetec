(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[803],{4408:function(e,o,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/readQR",function(){return n(7814)}])},7814:function(e,o,n){"use strict";n.r(o),n.d(o,{default:function(){return l}});var t=n(5893),s=n(7294);function l(){var e;let[o,n]=(0,s.useState)(null);return(0,s.useEffect)(()=>{let e=navigator.geolocation;e.getCurrentPosition(e=>{console.log(e),n(e)},e=>{console.error(e)},{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})},[]),(0,s.useEffect)(()=>{o&&fetch("https://maps.googleapis.com/maps/api/geocode/json?latlng=".concat(o.coords.latitude,",").concat(o.coords.longitude,"&key=AIzaSyB__4VTutW73EKMD93jWAO1zEEXyhbyrnA")).then(e=>e.json()).then(e=>{console.log(e),console.log(e.results[0].address_components),console.log(e.results[0].address_components[2].long_name),console.log(e.results[0].address_components[1].long_name);let o=e.results[0].address_components[2].long_name,n=e.results[0].address_components[1].long_name;o.includes("Provincia de")&&(o=o.replace("Provincia de ",""));let t=new URLSearchParams(window.location.search);console.log("\n\n"+t+" \n\n");let s=t.get("qrUrl");console.log("\n\n"+s+" \n\n"),fetch("http://127.0.0.1:3000/api/readQR",{method:"POST",body:JSON.stringify({provincia:o,canton:n,qrUrl:s}),headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}}),window.location.href=s}).catch(e=>{console.error("Error al intentar obtener los c\xf3digos QR:",e)})},[o]),(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("p",{style:{color:"white"},children:null==o?void 0:null===(e=o.coords)||void 0===e?void 0:e.latitude})})}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=4408)}),_N_E=e.O()}]);